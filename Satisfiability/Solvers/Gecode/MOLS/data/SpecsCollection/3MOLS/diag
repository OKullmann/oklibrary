# Counts for N >= 2:
# 0, 0, 0, 0, 0, 192, >= 40

# The maximal numbers k with kMOLSdiag known are
# https://oeis.org/A328873
# For N >= 1: 1, 0, 0, 2, 2, 1, 4, 6, 6.
# So 3MOLSdiag is satisfiable for 2 <= N <= 9 iff N >= 7.

# QUESTION: at least some elementary symmetry-breaking is needed to
# break the symmetries between the 3! = 6 order of A, B, C.



# gcMols:

# N=7:

# MOLS> ./gcMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu mindom asc 1 12 ""
#   N       rt  pl  bt        bv   bo  gcd        satc           t           ppc        flvs        gnds     gd st
#   7    count dom enu    mindom  asc    1         192      61.207     160405765      589058     1143000     22  0

# N=8:

# MOLS> ./gcMols 8 data/SpecsCollection/3MOLSdiag "" count dom - - - 1 12 "t,60"
# no satisfying assignment found; allowing roughly 100x more nodes:
# MOLS> ./gcMols 8 data/SpecsCollection/3MOLSdiag "" count dom - - - 1 16 "gnds,100000000" > AUS_gc_--- &
# exactly two runs found solutions (40 in both cases), namely first+desc, both for bin and enu:
#   N       rt  pl  bt        bv   bo  gcd        satc           t           ppc        flvs        gnds     gd st
#   8    count dom bin     first desc    1          40   73637.163  144938428209   789694330  1579388963     35  1
#   8    count dom enu     first desc    1          40  114503.188  196853523679  1105418962  1570445546     34  1

# N=9:

# MOLS> ./gcMols 9 data/SpecsCollection/3MOLSdiag "" +count dom bin first desc 1 16 "t,100000" > OUT_1655862862704230604 &
#   N       rt  pl  bt        bv   bo  gcd        satc           t           ppc        flvs        gnds     gd st
#   9   +count dom bin     first desc    1           0 1465082.292 2439494776479 10356967908 20713936171     48  1




# rlaMols:

# N=7:

# MOLS> ./rlaMols 7 data/SpecsCollection/3MOLS/diag "" +count dom enu mindom asc relpr 1 12 ""
#   N       rt  pl  bt        bv   bo    lar  gcd       satc           t        ppc     flvs     gnds    gd st      nds      lvs
#   7   +count dom enu    mindom  asc  relpr    1        192    2189.838    1909619    10913    32128    12  0    21215    10913
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
# 988.781  0.976    7.414  123.097  220.857   2.304  0.000  1.442    1.119   8.293
# 880.000  0.000    0.000  117.019  108.619   1.000  0.000  0.197    0.000   0.000
#1224.000  2.000   19.306  125.692  817.238   8.000  0.000  6.292    6.848  11.000
#  36.459  0.304    2.558    0.922   74.207   0.763  0.000  0.683    1.054   1.376
#     mu0  qfppc  pprunes  pmprune   pprobes  rounds   solc     tr  pelvals      dp
# 924.968  1.481    6.422   19.517   101.879   1.536  0.018  0.761    6.150  10.134
# 593.000  1.065    0.000    0.000     0.234   1.000  0.000  0.000    0.234   8.000
#1012.000  3.333   70.833  119.328  1022.302  10.000  1.000  7.996   17.349  12.000
#  29.032  0.223    5.292   16.867   104.607   0.868  0.131  0.805    3.007   0.784
# MOLS> ./rlaMols 7 data/SpecsCollection/3MOLSdiag "" count dom - - - relpr 1 16 nds,25000 > AUS_rla_--- &
# indeed mindom with bin or enu is best.

# N=8:

# MOLS> ./rlaMols 8 data/SpecsCollection/3MOLSdiag "" count dom enu mindom - relpr 1 16 nds,100000 > AUS_rla8 &
# no solution found.
# MOLS> ./rlaMols 8 data/SpecsCollection/3MOLSdiag "" count dom enu mindom - relpr 1 16 nds,2000000 > AUS_rla8 &
# no solution found:
#   N       rt  pl  bt        bv   bo    lar  gcd       satc           t        ppc     flvs     gnds    gd st      nds      lvs
#   8    count dom enu    mindom  asc  relpr    1          0  111219.148  187738232  1428508  3428524    30  1  2000016  1428514
#       vals       props      elvals       prunes       mprune       probes    rounds      solc          t   qelvals   qprunes
#   1759.301       4.781      10.034      168.913      557.049      404.300     1.030     0.000      0.886     0.006     0.152
#   1553.000       0.000       0.000        0.000        0.000        3.000     1.000     0.000      0.001     0.000     0.000
#   2358.000     101.000     158.000     1396.000     2310.000     6509.000     5.000     0.000     14.345     0.091     0.623
#     49.574       6.676      11.224      270.052      739.965      486.964     0.174     0.000      1.059     0.006     0.248
#   N       rt  pl  bt        bv   bo    lar  gcd       satc           t        ppc     flvs     gnds    gd st      nds      lvs
#   8    count dom enu    mindom desc  relpr    1          0   95768.017  186155241  1428506  3428522    30  1  2000016  1428511
#       vals       props      elvals       prunes       mprune       probes    rounds      solc          t   qelvals   qprunes
#   1759.016       5.056      10.376      168.722      559.619      410.860     1.030     0.000      0.763     0.006     0.152
#   1454.000       0.000       0.000        0.000        0.000        2.000     1.000     0.000      0.000     0.000     0.000
#   2358.000     109.000     164.000     1525.000     2310.000     6163.000     5.000     0.000     14.201     0.095     0.623
#     49.982       7.204      12.025      269.702      738.831      483.626     0.175     0.000      0.904     0.007     0.247




# laMols with wdL:

# N=7:

# MOLS> ./laMols 7 data/SpecsCollection/3MOLS/diag "" +count dom enu wdL "" relpr 1 12 "" ""
#   weights: A -> 0 0 1 2 3 4 5 6
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7   +count dom enu  wdL   asc  relpr   1      192    5454.601    9464822    33324    84833    13  0    51509    33324   18185
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
# 947.815  0.933    5.434  123.779  214.575   2.221  0.000  1.545    1.039   8.355
# 782.000  0.000    0.000  110.237  114.831   1.000  0.000  0.135    0.000   0.000
#1224.000  1.500   14.217  126.882  807.643   8.000  0.000  7.116   10.345  12.000
#  43.539  0.307    1.890    1.244   79.674   0.771  0.000  0.693    1.115   1.270
#    mu0  qfppc  pprunes  pmprune   pprobes  rounds   solc     tr  pelvals      dp
#839.261  1.650    2.883   11.445    61.099   1.284  0.006  0.527    5.042   9.885
#447.000  1.046    0.000    0.000     0.305   1.000  0.000  0.000    0.305   8.000
#967.000  6.000   33.333  119.287  1011.785   9.000  1.000  8.493   20.255  13.000
# 68.081  0.434    2.192   12.278    90.806   0.706  0.076  0.783    3.757   0.928
#     mu1      w   ltau     mind    meand     maxd      sdd     tb
# 937.589  2.832  0.023   28.282   58.410   86.364   25.323  0.899
# 738.000  2.000  0.007    4.000   17.500   18.000    0.000  0.101
#1224.000  6.000  0.060  101.000  267.667  478.000  182.220  1.510
#  49.272  0.617  0.009   12.461   29.511   59.308   26.989  0.150
#   weights: L -> 0 0 1 1.5849625007211561815 2 2.3219280948873623478 2.5849625007211561815 2.8073549220576041075
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7   +count dom enu  wdL   asc  relpr   1      192    5621.995    9538523    33020    84685    14  0    51665    33020   18645
#     mu0  qfppc  pprunes  pmprune   pprobes  rounds   solc     tr  pelvals      dp
# 946.226  0.942    5.230  123.762   216.102   2.229  0.000  1.578    1.099   8.446
# 782.000  0.000    0.000  112.500   114.831   1.000  0.000  0.099    0.000   0.000
#1224.000  1.400   13.365  126.838  1007.859   9.000  0.000  9.628    9.554  12.000
#  44.629  0.308    1.802    1.209    81.258   0.786  0.000  0.718    1.149   1.296
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#833.603  1.648    2.849   11.828   63.291   1.296  0.006  0.547    5.080  10.009
#447.000  1.046    0.000    0.000    0.303   1.000  0.000  0.000    0.303   8.000
#967.000  6.000   33.333  119.287  888.128   9.000  1.000  7.533   22.235  13.000
# 69.931  0.453    2.208   12.458   92.089   0.717  0.076  0.797    3.812   0.931
#    mu1      w   ltau    mind    meand     maxd     sdd     tb
#537.370  2.771  0.056  11.336   24.136   36.137  10.793  0.913
#462.000  2.000  0.017   2.229    8.106    8.696   0.000  0.100
#641.000  6.000  0.162  39.700  113.532  181.794  77.662  1.497
# 18.874  0.595  0.022   5.157   13.044   26.473  11.870  0.160
# Both runs appear very similar.

# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" +count dom enu wdL "" "" 1 12 "0.2" ""
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7   +count dom enu  wdL   asc  relpr   1      192    5454.141    9881317    34688    88193    14  0    53505    34688   18817
#     mu0  qfppc  pprunes  pmprune   pprobes  rounds   solc     tr  pelvals
# 946.484  0.933    5.475  123.834   214.207   2.220  0.000  1.491    1.014
# 814.000  0.000    0.000  115.353   114.831   1.000  0.000  0.161    0.000
#1224.000  1.500   14.217  126.882  1007.859   9.000  1.000  9.793    8.188
#  43.630  0.301    1.891    1.142    76.684   0.749  0.021  0.671    1.026
#    mu0  qfppc  pprunes  pmprune   pprobes  rounds   solc     tr  pelvals
#837.862  1.667    2.798   11.251    58.818   1.269  0.005  0.491    4.953
#467.000  1.046    0.000    0.000     0.366   1.000  0.000  0.000    0.264
#970.000  6.000   44.444  119.287  1011.785   9.000  1.000  8.659   20.022
# 68.062  0.455    2.114   12.184    88.324   0.688  0.073  0.735    3.713
#    mu1      w   ltau    mind   meand     maxd     sdd      dp     tb
#357.957  2.843  0.091   7.408  15.182   22.451    -nan   8.376  0.871
#315.000  2.000  0.025   1.490   4.839    5.033   0.000   0.000  0.141
#430.000  6.000  0.257  27.282  70.075  123.334  47.661  12.000  1.397
# 12.160  0.622  0.037   3.328   7.844   15.702    -nan   1.269  0.169
# Similar to the above.

# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" +count dom enu wdL "" "" 1 12 "r,r,r,r,r" ""
#   weights: 2.4000000000000000001 2.2 0.60000000000000000002 0.60000000000000000002 2.8 -> 0 0 1 5.2780316430915770378 24.251465064166369321 36.758347359905120224 55.715236050951944917 388.02344102666190914
#   weights: 2.4000000000000000001 2.2 0.60000000000000000002 0.60000000000000000002 2.8 -> 0 0 1 5.2780316430915770378 24.251465064166369321 36.758347359905120224 55.715236050951944917 388.02344102666190914
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7   +count dom enu  wdL   asc  relpr   1      192    5252.710    8969296    31360    79921    13  0    48561    31360   17201
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
# 948.908  0.933    5.651  123.682  219.091   2.257  0.000  1.599    1.129
# 821.000  0.000    0.000  113.661  114.689   1.000  0.000  0.032    0.000
#1224.000  1.667   14.187  126.882  834.811   8.000  0.000  6.982    8.188
#  44.179  0.308    1.924    1.283   81.026   0.789  0.000  0.740    1.145
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
#840.054  1.641    3.101   12.040   63.627   1.293  0.006  0.546    5.244
#447.000  1.060    0.000    0.000    0.265   1.000  0.000  0.000    0.265
#977.000  6.000   29.412  119.287  785.348   8.000  1.000  7.532   20.985
# 66.788  0.425    2.231   12.403   90.082   0.703  0.078  0.780    3.823
#      mu1      w   ltau      mind     meand      maxd       sdd      dp     tb
# 8978.042  2.823  0.002   401.465   771.293  1125.531      -nan   8.311  0.911
# 6856.000  2.000  0.001    34.570   231.118   240.597     0.000   0.000  0.031
#13377.000  6.000  0.004  1270.893  2973.551  6273.527  2345.904  12.000  1.390
#  727.597  0.634  0.001   175.745   356.459   740.359      -nan   1.279  0.180
# A bit better.

# Nomad found a good improvement:
# 3MOLS> time nomad np_diag_wdL
# Best feasible solution:     #17014 ( 1.19 2 1.29 0.01 1.01 )    Evaluation OK    f = 21468  h =   0
# Blackbox evaluations:        102
# Total model evaluations:     16909
# Cache hits:                  5
# Total number of evaluations: 107
# real    333m32.379s user    6599m7.065s sys     28m25.029s
# Rerunning with making timeouts infeasible:
# 3MOLS> time nomad np_diag_wdL
# Best feasible solution:     #7812 ( 2.01 2.2 1.31 0.02 2.03 )   Evaluation OK    f = 21481  h =   0
# Blackbox evaluations:        114
# Total model evaluations:     9469
# Cache hits:                  23
# Total number of evaluations: 137
# real    354m23.758s user    7076m24.414s sys     28m55.434s
# Basically the same.

# Attempt at finding good weights by optimising the number of la-reductions
# at inner nodes, with nds=1000:
# 3MOLS> nomad np_diag_7small_wdL
# Best feasible solution:     #18894 ( 1.02 4 0.6013 0.01 0.1621 )        Evaluation OK    f =  -1.5309999999999999165     h =   0
# Blackbox evaluations: 296 Total model evaluations: 46532 Cache hits: 48 Total number of evaluations: 344
# MOLS> ./laMols 7 data/SpecsCollection/3MOLS/diag "" +count dom enu wdL "" "" 1 12 "1.02, 4, 0.6013, 0.01, 0.1621" ""
#   weights: 1.02 4 0.60130000000000000002 0.0099999999999999999998 0.1621 -> 0 0 1 2.0279189595800582774 32.446703353280932438 49.224341450520525589 49.566723821488639642 55.460933714026805896
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7   +count dom enu  wdL   asc  relpr   1      192    2133.064    2739696    11780    30209    12  0    18429    11780    6649
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#1002.006  1.004    8.954  122.588  219.323   2.357  0.000  1.594    1.337   7.431
# 867.000  0.000    0.000  114.978  107.436   1.000  0.000  0.220    0.000   0.000
#1224.000  2.000   22.870  125.959  949.559   9.000  0.000  9.031    8.921  11.000
#  52.324  0.308    2.973    1.342   82.472   0.835  0.000  0.740    1.212   1.410
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
# 904.551  1.599    7.216   14.961   68.063   1.316  0.016  0.562    5.240   9.021
# 606.000  1.058    0.000    0.000    0.229   1.000  0.000  0.000    0.221   6.000
#1026.000  6.000  192.857  118.582  710.256   7.000  2.000  6.665   18.076  12.000
#  55.063  0.352    9.928   14.515   87.200   0.689  0.137  0.717    3.291   1.032
#      mu1      w   ltau      mind     meand      maxd       sdd     tb
# 9796.638  2.772  0.002   352.446   552.544   742.891      -nan  0.914
# 7827.000  2.000  0.001    32.447   205.194   218.835     0.000  0.213
#12429.000  6.000  0.005  1025.578  2401.471  3860.041  1655.078  1.573
#  618.927  0.670  0.001   125.040   240.356   478.970      -nan  0.190
# The best weights for wdL obtained so far.

# N=8:

# 3MOLS> nomad np_diag_8small_wdL
# Best feasible solution: #25663 ( 3.9964 0.0714 1.5469 0.1198 0.1134 0.325 ) f =  -1.9690000000000000835 h = 0
# Blackbox evaluations: 300 Total model evaluations: 43203 Cache hits: 22 Total number of evaluations: 322
# MOLS> ./laMols 8 data/SpecsCollection/3MOLS/diag "" count dom enu wdL - relpr 1 16 "3.9964, 0.0714, 1.5469, 0.1198, 0.1134, 0.325" nds,200000 > AUS8_wdL_nomad &
# server 47312 XXX



# laMols with newv:

# N=7:

# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" +count dom enu newv "" relpr 1 12 "" ""
# Best is "O":
#   weights: O -> 0 0 1 1 1 1 1 1
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7   +count dom enu newv   asc  relpr   1      192    5438.024    8738424    30356    77868    14  0    47512    30356   17156
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
# 949.665  0.936    5.453  123.597  222.064   2.266  0.001  1.677    1.173
# 791.000  0.000    0.000  112.650  114.802   1.000  0.000  0.201    0.000
#1224.000  1.500   13.779  126.910  873.472   9.000  1.000  7.740    9.160
#  44.084  0.297    1.852    1.386   80.299   0.793  0.031  0.731    1.204
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
#842.258  1.628    2.765   11.932   65.313   1.308  0.006  0.585    5.445
#460.000  1.053    0.000    0.000    0.421   1.000  0.000  0.000    0.353
#973.000  6.000   28.571  123.815  834.919   8.000  1.000  7.804   21.082
# 67.916  0.420    1.965   12.197   90.645   0.710  0.076  0.803    3.903
#    mu1      w   ltau     mind    meand     maxd     sdd      dp     tb
#538.450  2.769  0.028   25.599   44.648   62.889  16.483   8.292  0.947
#471.000  2.000  0.007    5.000   16.000   16.000   0.000   0.000  0.214
#641.000  5.000  0.078  101.000  124.667  225.000  96.500  12.000  1.855
# 18.563  0.569  0.012   10.412   19.001   37.177  17.129   1.258  0.154
# Optimisation for blocks of size 1:
# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 "0,a,0" "nds,47512" > AUS_0a0 &
# a=8 yields a small improvement:
#   weights: 0 8 0 0 0 0 -> 0 0 256 256 256 256 256 0
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7    count dom enu newv   asc  relpr   1      192    6170.261    8679821    29947    76930    13  0    46983    29947   17036
#       vals       props      elvals      prunes       mprune       probes    rounds      solc         tr   qelvals   qprunes
#   1174.264      25.285      34.400      55.016      492.144     1137.854     1.662     0.004      1.301     0.029     0.037
#    745.000       0.000       0.000       0.000        0.000        2.000     1.000     0.000      0.000     0.000     0.000
#   1518.000     158.000     196.000     716.000     1476.000     8965.000     9.000     1.000     15.214     0.160     0.286
#     80.198      26.210      34.422      66.266      522.132     1076.887     0.877     0.064      1.327     0.029     0.023
#         mu         w      ltau          mind         meand          maxd           sdd         dp        tb
#   1231.708     2.758     0.000      6000.057     10315.876     14426.302      3727.219      8.302     1.210
#   1046.000     2.000     0.000      1025.000      3841.000      3841.000         0.000      0.000     0.274
#   1518.000     5.000     0.000     22796.000     28089.667     47145.000     20751.500     12.000     2.675
#     50.485     0.557     0.000      2411.712      4285.366      8349.982      3863.200      1.263     0.392
# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 "0,0,a,0" "nds,47512" > AUS_00a0 &
# a=-6 yields an improvement
#   weights: 0 0 -6 0 0 0 -> 0 0 1 0.015625 0.015625 0.015625 0.015625 0
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7    count dom enu newv   asc  relpr   1      192    6149.301    6950979    25528    68841    13  0    43313    25528   17785
#       vals       props      elvals      prunes       mprune       probes    rounds      solc         tr   qelvals   qprunes
#   1184.024      27.878      37.048      66.141      558.446     1323.468     1.770     0.004      1.039     0.031     0.042
#    749.000       0.000       0.000       0.000        0.000        2.000     1.000     0.000      0.000     0.000     0.000
#   1518.000     154.000     201.000     799.000     1476.000     9175.000     9.000     1.000     17.591     0.164     0.286
#     79.160      27.879      36.617      73.755      524.385     1109.735     0.934     0.066      1.122     0.031     0.023
#         mu         w      ltau       mind      meand       maxd        sdd         dp        tb
#   1232.848     2.435     0.126      5.343      8.693     11.972      3.023      8.411     0.853
#   1034.000     2.000     0.036      1.094      1.262      1.281      0.000      0.000     0.106
#   1518.000     5.000     1.099     16.453     33.917     69.484     28.623     13.000     3.110
#     53.564     0.675     0.066      2.335      4.508      8.428      3.797      1.357     0.432
# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 0,0,0,a,0 nds,43313 > AUS_000a0 &
# a=-9 best (reached satc=192, but was stopped).
# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 0,0,0,0,a,0 nds,43313 > AUS_0000a0 &
# a=-6 best:
#   weights: 0 0 0 0 -6 0 -> 0 0 1 1 1 0.015625 0.015625 0
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7    count dom enu newv   asc  relpr   1      192    4337.963    3525135    14972    40375    14  0    25403    14972   10431
#       vals       props      elvals      prunes       mprune       probes    rounds      solc         tr   qelvals   qprunes
#   1214.105      25.670      35.151      82.813      581.202     1333.801     1.777     0.008      1.918     0.029     0.057
#    872.000       0.000       0.000       0.000        0.000        2.000     1.000     0.000      0.000     0.000     0.000
#   1518.000     136.000     186.000     864.000     1476.000     7924.000     8.000     1.000     14.983     0.148     0.482
#     70.879      23.852      32.281      87.746      531.335     1095.761     0.906     0.087      1.634     0.027     0.036
#         mu         w      ltau       mind       meand        maxd        sdd         dp        tb
#   1257.612     2.435     0.039     17.235      25.956      33.802      7.578      8.049     1.631
#   1086.000     2.000     0.014      3.000      11.098      11.469      0.000      0.000     0.548
#   1518.000     4.000     0.125     53.156     109.521     171.234     72.973     12.000     2.520
#     51.512     0.523     0.012      6.693      10.455      19.477      9.044      1.384     0.314
# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 0,0,0,0,0,a nds,43313 > AUS_00000a0 &
# all results very similar (close to 180, all stopped).
# Optimising on the best two parameters:
# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 0,0,a,0,-6,0 nds,25403 > AUS_00a0-60 &
# best a=8:
#   weights: 0 0 8 0 -6 0 -> 0 0 1 256 256 4 4 0
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7    count dom enu newv   asc  relpr   1      192    1538.848    1878286     8872    23081    12  0    14209     8872    5337
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
#1014.263  0.974   10.449  122.447  208.103   2.280  0.000  1.159    1.268
# 911.000  0.000    0.000  117.057  102.909   1.000  0.000  0.031    0.000
#1224.000  2.000   23.679  125.247  606.646   6.000  0.000  5.185    5.848
#  53.738  0.371    2.949    1.246   78.365   0.801  0.000  0.646    1.104
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
# 920.523  1.547    8.801   19.273   85.968   1.430  0.022  0.544    5.675
# 788.000  1.044    0.000    0.000    0.253   1.000  0.000  0.000    0.253
#1026.000  4.000  183.333  121.178  668.905   7.000  2.000  6.477   17.006
#  47.709  0.293   11.182   17.378  101.334   0.833  0.179  0.695    3.088
#    mu1      w   ltau      mind      meand       maxd       sdd      dp     tb
#558.279  2.662  0.000  3206.620   4138.635   4989.661   787.788   7.316  0.718
#521.000  2.000  0.000   786.000   1812.500   2060.000     0.000   0.000  0.035
#641.000  4.000  0.001  7428.000  11888.500  16425.000  4542.877  11.000  1.471
# 21.461  0.583  0.000   911.972   1289.268   2226.121   976.729   1.439  0.279
# Optimising on the neighbour of the best parameter:
# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 0,0,0,a,-6,0 nds,25403 > AUS_000a-60 &
# only a=0 not aborted, so no progress here.
# Optimising again this parameter, this time as the "middle parameter":
# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 0,0,8,a,-6,0 nds,14209 > AUS_008a-60 &
# only a=0 not aborted. Finally optimising the special parameter:
# MOLS> ./laMols 7 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 a,0,8,0,-6,0 nds,14209 > AUS_a080-60 &
# no influence for a <= 0.2, and for a >= 0.3 some small impairment.
# So the result here is "0,0,8,0,-6,0".

# Nomad found only a small improvement (likely to be ignored):
# 3MOLS> time nomad np_diag_newv
# Best feasible solution:     #8521 ( -0.76 -4.5 8.18 0.06 -7.04 -1.28 )  Evaluation OK    f = 14033  h =   0
# Blackbox evaluations:        137
# Total model evaluations:     19947
# Cache hits:                  6
# Total number of evaluations: 143
# real    338m9.927s user    6954m0.560s sys     33m5.692s
# Rerunning with making timeouts infeasible:
# 3MOLS> time nomad np_diag_newv
# Best feasible solution:     #12904 ( -0.9 -2 5.8 0.1 -8.99 -5 ) Evaluation OK    f = 13785  h =   0
# Blackbox evaluations:        118
# Total model evaluations:     11635
# Cache hits:                  17
# Total number of evaluations: 135
# real    334m19.432s user    5984m10.500s sys     27m3.096s
# Perhaps also basically the same.

# Attempt at finding good weights by optimising the number of la-reductions
# at inner nodes, with nds=1000:
# 3MOLS> nomad np_diag_7small_newv
# Best feasible solution:     #11865 ( -0.56 0.67 -1 4 0.96 -4 )  Evaluation OK    f =  -1.5200000000000000178 h =   0
# Blackbox evaluations: 82 Total model evaluations: 10716 Cache hits: 7 Total number of evaluations: 89
# MOLS> time ./laMols 7 data/SpecsCollection/3MOLS/diag "" +count dom enu newv "" relpr 1 12 "-0.56,0.67,-1,4,0.96,-4" ""
#   weights: -0.56 0.67000000000000000002 -1 4 0.95999999999999999998 -4 -> 0 -0.56 1.5910729675098373417 0.79553648375491867086 12.728583740078698734 24.76103989667823848 1.547564993542389905 0
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7   +count dom enu newv   asc  relpr   1      192    5341.568    7818036    27208    70245    13  0    43037    27208   15829
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
# 947.206  1.033    5.649  123.227  241.321   2.375  0.002  1.743    1.460
# 784.000  0.000    0.000  113.223  115.334   1.000  0.000  0.170    0.000
#1224.000  1.667   13.394  126.779  783.149   7.000  1.000  6.307    7.701
#  46.650  0.171    1.894    1.710   75.580   0.764  0.039  0.722    1.314
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
#841.558  1.576    2.889   14.195   79.121   1.404  0.006  0.647    5.894
#550.000  1.051    0.000    0.000    0.295   1.000  0.000  0.000    0.270
#975.000  6.000   20.000  123.929  833.183   8.000  1.000  8.288   21.571
# 63.110  0.361    1.753   14.093  106.884   0.862  0.078  0.886    4.020
#    mu1      w   ltau      mind     meand      maxd      sdd      dp     tb
#536.188  2.719  0.002   361.374   546.672   718.013     -nan   8.141  0.907
#471.000  2.000  0.001    40.692   125.924   132.288    0.000   0.000  0.118
#641.000  5.000  0.006  1305.143  1382.685  2342.403  902.679  12.000  1.721
# 19.910  0.561  0.001   171.900   225.392   378.117     -nan   1.270  0.193
# real	8m6.822s user	89m1.572s sys	0m28.244s
# The optimisation on pelvals succeeded, but performance is bad.
# Running the optimisation for longer:
# Best feasible solution:     #32187 ( -0.57 9 -4.3 -8.97 6.92 6.9 )      Evaluation OK    f =  -1.5289999999999999147     h =   0
# Blackbox evaluations: 300 Total model evaluations: 39165 Cache hits: 26 Total number of evaluations: 326
# MOLS> time ./laMols 7 data/SpecsCollection/3MOLS/diag "" +count dom enu newv "" relpr 1 12 "-0.57,9,-4.3,-8.97,6.92,6.9" ""
#   weights: -0.56999999999999999999 9 -4.3000000000000000002 -8.9700000000000000002 6.9200000000000000001 6.9000000000000000001 -> 0 -0.56999999999999999999 512 25.992076683399536721 0.051832471613402606219 6.2766727831740058842 749.61187632416021526 0
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7   +count dom enu newv   asc  relpr   1      192    5424.950    5791884    21921    58700    13  0    36779    21921   14858
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
# 966.041  1.014    6.333  123.104  240.982   2.403  0.001  1.935    1.492
# 822.000  0.000    0.000  108.061  114.764   1.000  0.000  0.190    0.000
#1224.000  2.000   14.923  126.597  785.495   7.000  1.000  7.408    9.695
#  46.863  0.183    1.935    1.529   81.586   0.802  0.023  0.805    1.312
#    mu0  qfppc  pprunes  pmprune   pprobes  rounds   solc      tr  pelvals
#863.763  1.529    4.101   16.090    91.205   1.469  0.008   0.805    6.407
#543.000  1.044    0.000    0.000     0.265   1.000  0.000   0.000    0.265
#992.000  5.000   42.857  121.814  1066.264  10.000  1.000  10.462   21.602
# 64.470  0.371    2.560   13.906   110.795   0.912  0.091   1.005    4.075
#    mu1      w   ltau      mind      meand       maxd       sdd      dp     tb
#542.761  2.475  0.000  1675.315   2633.744   3608.018      -nan   8.177  1.025
#471.000  2.000  0.000    58.501    168.150    168.150     0.000   0.000  0.174
#641.000  5.000  0.008  4755.715  11406.817  21346.057  7885.641  12.000  1.779
# 19.869  0.747  0.000   725.262   1179.680   2232.591      -nan   1.289  0.195
# Even better pelvals, and a bit fewer nds than before (still pretty bad).
# A problem might the uncontrolled spread of the tree; need to revisit this
# approach once deterministicly the tree can be cut at leaves.
# Now *minimising" pelvals:
# Best feasible solution:     #47245 ( -0.0574 -3.48 -4.2182 6.9965 9 4.95 )      Evaluation OK    f =   0.62600000000000000089    h =   0
# Blackbox evaluations: 300 Total model evaluations: 48134 Cache hits: 22 Total number of evaluations: 322
# MOLS> time ./laMols 7 data/SpecsCollection/3MOLS/diag "" +count dom enu newv "" relpr 1 12 "-0.0574, -3.48, -4.2182, 6.9965, 9, 4.95" ""
#   weights: -0.0574 -3.48 -4.2181999999999999999 6.9964999999999999999 9 4.9499999999999999998 -> 0 -0.0574 0.089622203000989211373 0.0048151618269028246792 0.61484727423135908581 314.80180440645585194 9730.5119771932554675 0
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  7   +count dom enu newv   asc  relpr   1      192   41847.075   61764197   272072   679983    15  0   407911   272072  135839
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals
# 971.053  0.891    4.920  123.600  211.053   2.148  0.000  1.623    0.765
# 763.000  0.000    0.000  110.516  110.474   1.000  0.000  0.093    0.000
#1224.000  4.000   16.642  128.178  966.841   9.000  0.000  8.890    9.698
#  41.726  0.343    1.523    1.205   74.623   0.747  0.000  0.642    0.838
#     mu0  qfppc  pprunes  pmprune   pprobes  rounds   solc     tr  pelvals
# 895.563  1.654    2.074   12.295    57.696   1.262  0.001  0.523    4.390
# 505.000  1.040    0.000    0.000     0.205   1.000  0.000  0.000    0.205
#1083.000  6.000   30.000  125.986  1032.225  10.000  1.000  9.190   21.244
#  50.447  0.434    1.569   14.437    81.770   0.641  0.027  0.704    2.787
#    mu1      w   ltau      mind      meand       maxd       sdd      dp     tb
#548.552  3.003  0.000  2543.865   3718.311   4938.891      -nan   8.841  0.969
#467.000  2.000  0.000   315.478    790.528    946.990     0.000   0.000  0.077
#641.000  6.000  0.001  9451.743  10250.911  17038.958  5995.429  16.000  1.963
# 16.933  0.874  0.000  1192.104   1194.213   2016.252      -nan   1.303  0.106
# real	60m36.102s user	697m27.080s sys	5m8.465s
# So there seems a positive correlation between pelvals (for inodes) and
# goodness of the heuristic, but it seems not very good at finding really
# good weights.


# N=8:

# Using the weights from N=7:

# MOLS> ./laMols 8 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 0,0,8,0,-6,0 nds,200000 > AUS8_0080-60 &
#   weights: 0 0 8 0 -6 0 0 -> 0 0 1 256 256 4 4 4 0
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  8    count dom enu newv   asc  relpr   1        0   88242.977   44525992   121186   321201    26  1   200015   121193   78822
#       vals       props      elvals       prunes       mprune        probes     rounds      solc         tr   qelvals   qprunes
#   1404.294      28.915      37.523      129.035      669.548      1689.560      1.871     0.000      5.298     0.027     0.053
#    931.000       0.000       0.000        0.000        0.000         2.000      1.000     0.000      0.000     0.000     0.000
#   2358.000     217.000     260.000     1432.000     2310.000     14431.000     12.000     0.000     51.211     0.162     0.350
#    146.860      26.028      33.093      142.663      607.587      1414.203      1.008     0.000      4.743     0.023     0.040
#         mu         w      ltau          mind         meand          maxd           sdd         dp         tb
#   1491.496     2.540     0.000      4880.245      8694.663     12362.288      3385.041     20.311      4.390
#   1181.000     2.000     0.000        30.000        85.000        85.000         0.000      0.000      0.190
#   2358.000     6.000     0.021     24653.000     32499.750     48462.000     22439.500     30.000     10.335
#    113.792     0.546     0.000      2938.250      3868.259      7151.355      3528.334      2.089      0.966
# Trying all orders:
# MOLS> ./laMols 8 data/SpecsCollection/3MOLSdiag "" count dom enu newv - relpr 1 16 0,0,8,0,-6,0 nds,200000 > AUS8_0080-60-bo &
# no satisfying assignments found; the two descending versions perform less
# propagation; asc performs the most propagation (eliminations by la-reduction);
# one needed to see the average tau-value.
# Moving the block by one place:
# MOLS> ./laMols 8 data/SpecsCollection/3MOLSdiag "" count dom enu newv "" relpr 1 16 0,0,0,8,0,-6,0 nds,200000 > AUS8_0080-60 &
#   weights: 0 0 0 8 0 -6 0 -> 0 0 1 1 256 256 4 4 0
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc     flvs     gnds    gd st      nds      lvs    inds
#  8    count dom enu newv   asc  relpr   1        0   55455.400   33737449   123433   323449    30  1   200016   123436   76580
#       vals       props      elvals       prunes       mprune        probes     rounds      solc         tr   qelvals   qprunes
#   1718.714      19.390      27.410      100.563      815.985      1597.024      1.725     0.000      3.146     0.016     0.047
#   1131.000       0.000       0.000        0.000        0.000         2.000      1.000     0.000      0.000     0.000     0.000
#   2358.000     166.000     292.000     1469.000     2310.000     14995.000     10.000     0.000     37.844     0.161     0.750
#     99.424      17.812      25.044      115.998      741.136      1502.068      0.905     0.000      3.023     0.014     0.032
#         mu         w      ltau          mind         meand          maxd           sdd         dp        tb
#   1773.691     2.616     0.000      3699.087      5924.472      7926.777      1902.443     17.963     3.336
#   1326.000     2.000     0.000       259.000      1118.000      1284.000         0.000      0.000     0.222
#   2358.000     7.000     0.001     20791.000     21983.333     26472.000     11167.000     33.000     5.556
#     94.054     0.619     0.000      1964.957      2349.730      3735.072      1738.336      2.866     0.604
# Less propagation, so should be worse.

# Optimising the number of la-reductions
# at inner nodes, with nds=1000:
# 3MOLS> nomad np_diag_8small_newv
# Best feasible solution: #31505 ( -0.8913 -1.969 -6.9706 -8.1 4.1 -2.3 -8.8 ) f =  -2.1739999999999999325 h = 0
# Blackbox evaluations: 301 Total model evaluations: 43637 Cache hits: 19 Total number of evaluations: 320
# MOLS> ./laMols 8 data/SpecsCollection/3MOLS/diag "" count dom enu newv - relpr 1 16 "-0.8913, -1.969, -6.9706, -8.1, 4.1, -2.3, -8.8" nds,200000 > AUS8_newv_nomad &
# server 47294 XXX



squares A B C AB AC BC
ls A B C AB AC BC
rred A B C
diag A B C
antidiag A B C
rprod B AB A
rprod C AC A
rprod C BC B
