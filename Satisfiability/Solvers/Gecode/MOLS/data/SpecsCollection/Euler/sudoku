# Counts for N >= 2:
# 0, 2, 4, 32, 0, >= 52782, >= 55589, >= 34872, ?

# Known to exist [Pedersen, Vis, 2009] for all square N;
# see EulerSudokudiag for a strengthening.

# Is N=10 unsatisfiable ?!


# gcMols:

# N=6:

# MOLS> ./gcMols 6 data/SpecsCollection/Euler/sudoku "" count dom - - "" 1 16 "t,8"
# best:
#  6    count dom bin    maxdom  asc   1         0      23.916      43460629      338153      676305     23  0

# N=7:

# MOLS> ./gcMols 7 data/SpecsCollection/EulerSudoku "" +count "" enu mindom asc 1 12 ""
# aborted after 16h wallclock-time and 52782 solutions found.

# Trying to find the fastest enumerator:
# MOLS> ./gcMols 7 data/SpecsCollection/Euler/sudoku "" count - - - "" 1 12 "t,20"
# indeed mindom seems fastest.
# MOLS> ./gcMols 7 data/SpecsCollection/Euler/sudoku "" count - - mindom "" 1 12 "t,20"
# there is a lot of random variation; let's stick with dom+enu.

# MOLS$ time ./gcMols 7 data/SpecsCollection/Euler/sudoku "" +count dom enu mindom "" 1 16 ""
# running on server XXX

# N=8:

# MOLS> ./gcMols 8 data/SpecsCollection/EulerSudoku "" count "" enu maxdeg asc 1 12 "t,800"
#   N       rt  pl  bt        bv   bo  gcd        satc           t           ppc        flvs        gnds     gd st
#   8    count dom enu    maxdeg  asc    1       55589    8778.292   16604976905   130638635   199224124     43  1

# N=9:

# MOLS> ./gcMols 9 data/SpecsCollection/EulerSudoku "" count dom enu mindeg asc 1 12 "t,180"
#   N       rt  pl  bt        bv   bo  gcd        satc           t           ppc        flvs        gnds     gd st
#   9    count dom enu    mindeg  asc    1       34872    1978.289    3791160380    23152010    38626511     46  1

# N=10:

# MOLS> time ./gcMols 10 data/SpecsCollection/Euler/sudoku "" +count dom enu mindom "" 1 16 ""
# running on server XXX


# rlaMols:

# N = 6:

# ./rlaMols 6 data/SpecsCollection/Euler/sudoku "" count dom - - "" "" 1 16 "lvs,12076"
# best is bin+first, followed by enu+first:
#  N       rt  pl  bt        bv   bo    lar gcd     satc           t        ppc st      nds    inds      lvs
#  6    count dom bin     first  asc  relpr   1        0     155.393     455634  0    10503    5251     5252
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#257.137  0.752   21.575  128.806  158.381   1.910  0.000  0.209    1.474  11.919
#200.000  0.000    0.000   42.000   38.500   1.000  0.000  0.006    0.000   0.000
#348.000  2.000   98.701  136.634  460.769   5.000  0.000  0.882   16.438  19.000
# 18.342  0.506   11.673    9.121   53.399   0.710  0.000  0.103    1.871   2.514
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#216.792  1.674   34.334   43.866   72.848   1.211  0.000  0.085   10.547  13.917
# 32.000  1.069    0.000    0.000    1.333   1.000  0.000  0.000    1.136   7.000
#266.000  4.000  440.000  117.213  468.110   5.000  0.000  0.968   26.695  20.000
# 33.640  0.354   38.926   20.409   61.331   0.515  0.000  0.085    4.566   2.087



# laMols with wdL:

# MOLS> ./laMols 6 data/SpecsCollection/Euler/sudoku "" count dom enu wdL "" "" 1 12 "" "" ""
# slightly better L:
#   weights: L -> 0 0 1 1.5849625007211561815 2 2.3219280948873623478 2.5849625007211561815
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc st      nds    inds      lvs     plvs
#  6    count dom enu  wdL   asc  relpr   1        0     169.134    1237212  0    19721    6801    12920        0
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#213.273  0.599    7.123  131.472  188.612   1.658  0.000  0.104    1.091   7.736
# 75.000  0.000    0.000   38.710   34.667   1.000  0.000  0.001    0.000   0.000
#348.000  2.000  234.615  144.000  605.392   7.000  0.000  0.548   27.586  13.000
# 22.565  0.616   17.359   10.770   69.735   0.773  0.000  0.053    2.926   1.551
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#175.922  1.876   11.906   30.700   64.048   1.260  0.000  0.037    6.965   9.322
# 28.000  1.062    0.000    0.000    1.290   1.000  0.000  0.000    1.290   7.000
#206.000  4.000  837.500  160.000  370.936   4.000  0.000  0.295   23.762  14.000
# 34.348  0.536   73.565   38.104   85.638   0.535  0.000  0.053    3.408   1.122
#      estlvs
#3.861688e+04
#2.109958e+03
#2.324086e+06
#1.088609e+05
#    mu1      w   ltau   minp  meanp   maxp    sdd     tb
#139.521  2.900  0.128  0.315  0.379  0.471  0.068  0.076
# 36.000  2.000  0.024  0.002  0.250  0.250  0.000  0.000
#205.000  4.000  0.244  0.500  0.500  0.859  0.359  0.167
# 17.812  0.891  0.058  0.155  0.113  0.111  0.074  0.027

# Absolute optimisation on lvs (MAX_TIME=3600):
# LVS/sudoku_6_wdL$ nomad np
# 545  4548          3.1541     1.31       0.012      4.3598
# A termination criterion is reached: Maximum allowed time reached (Base) No more points to evaluate
# Blackbox evaluations: 1127 Total model evaluations: 81918 Cache hits: 336 Total number of evaluations: 1463
# LVS/sudoku_6_wdL$ ./laMols 6 ../../sudoku "" count dom enu wdL "" "" 1 16 "3.1541,1.31,0.012,4.3598" "" ""
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc st      nds    inds      lvs     plvs
#  6    count dom enu  wdL   asc  relpr   1        0     144.879     513084  0     7313    2713     4600        0
#    mu0  qfppc   pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#239.988  0.709    52.788  130.578  171.373   1.768  0.000  0.188    1.389   6.558
# 48.000  0.000     0.000   32.287   12.500   1.000  0.000  0.000    0.000   0.000
#348.000  2.400  1500.000  200.000  425.714   4.000  0.000  0.939   23.457  11.000
# 39.429  0.593   218.525   16.798   67.834   0.707  0.000  0.115    2.530   1.341
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#198.837  1.661   16.391   36.653   80.140   1.335  0.000  0.089    9.161   8.026
# 32.000  1.071    0.000    0.000    1.117   1.000  0.000  0.000    1.117   6.000
#252.000  3.500  200.000  127.511  728.384   7.000  0.000  1.728   24.454  12.000
# 49.703  0.349   31.881   28.952   90.320   0.716  0.000  0.115    4.620   1.010
#      estlvs
#1.172542e+04
#7.301417e+02
#3.230885e+05
#2.241095e+04
#     mu1      w   ltau   minp  meanp   maxp    sdd     tb
#1315.096  2.695  0.012  0.296  0.391  0.500  0.092  0.142
#  36.000  2.000  0.002  0.025  0.200  0.250  0.000  0.001
#2000.000  5.000  0.173  0.500  0.500  0.913  0.413  0.451
# 349.918  0.624  0.024  0.138  0.090  0.115  0.083  0.071
# Somewhat better than rlaMols.

# Optimising TAUscan via Nomad (MAX_TIME 600s, rep=100):
# TAU/sudoku_6_wdL_ave$ nomad np
# 635  3665.380307   5.0282     2.4535     0.0051     4.2969
# A termination criterion is reached: No termination (all). Mesh minimum precision reached (Algo)
# Blackbox evaluations: 1041 Total model evaluations: 91187 Cache hits: 412 Total number of evaluations: 1453
# TAU/sudoku_6_wdL_ave$ time ./TAUscan 6 ../../sudoku "" enu wdL hash "5.0282,2.4535,0.0051,4.2969" 100 10 all
# 100 : 7.87745756653103090084e+02 3.84896591489305050349e+03 2.47669294526803586649e+04; 3.59256534492158930494e+03
# real    0m1.277s user    0m11.707s sys     0m0.223s
# TAU/sudoku_6_wdL_ave$ ./laMols 6 ../../sudoku "" count dom enu wdL "" "" 1 16 "5.0282,2.4535,0.0051,4.2969" "" ""
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc st      nds    inds      lvs     plvs
#  6    count dom enu  wdL   asc  relpr   1        0     163.158     577800  0     7913    2977     4936        0
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals     dp
#253.666  0.779   16.521  128.798  191.790   1.947  0.000  0.200    1.507  6.287
# 75.000  0.000    0.000   30.508   28.000   1.000  0.000  0.000    0.000  0.000
#348.000  2.000  257.143  138.462  543.701   6.000  0.000  0.955   22.414  9.000
# 22.489  0.514   15.901   11.990   78.791   0.854  0.000  0.116    2.642  1.214
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#207.483  1.707   23.282   36.823   76.556   1.347  0.000  0.078    9.178   7.924
# 32.000  1.077    0.000    0.000    1.087   1.000  0.000  0.000    1.087   6.000
#267.000  5.000  254.545  132.889  724.891   7.000  0.000  1.071   23.506  10.000
# 40.162  0.445   39.050   28.853   85.787   0.713  0.000  0.099    4.491   0.828
#      estlvs
#1.249488e+04
#7.877458e+02
#5.821174e+05
#3.790531e+04
#      mu1      w   ltau   minp  meanp   maxp    sdd     tb
#10257.896  2.658  0.005  0.322  0.399  0.485  0.074  0.141
#   36.000  2.000  0.000  0.004  0.250  0.250  0.000  0.000
#16135.000  4.000  0.173  0.500  0.500  0.900  0.400  0.576
# 2070.429  0.662  0.026  0.135  0.094  0.115  0.077  0.070
# Somewhat worse than above.


# laMols with newvars:

# MOLS> ./laMols 6 data/SpecsCollection/Euler/sudoku "" count dom enu newv "" "" 1 12 "" "" ""
# A is best:
#   weights: A -> 0 0 1 2 3 4 5
#  N       rt  pl lbt  dis   lbo    lar gcd     satc           t        ppc st      nds    inds      lvs     plvs
#  6    count dom enu newv   asc  relpr   1        0     113.650     724507  0    10218    4042     6176        0
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#231.681  0.670   11.556  130.870  179.308   1.788  0.000  0.116    1.283   6.259
# 75.000  0.000    0.000   40.860   34.667   1.000  0.000  0.000    0.000   0.000
#348.000  2.000  234.615  137.824  496.020   6.000  0.000  0.491   26.341  11.000
# 29.997  0.566   16.720    9.711   66.033   0.787  0.000  0.070    2.737   1.454
#    mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#188.403  1.690   19.988   31.482   65.972   1.236  0.000  0.044    8.187   7.789
# 32.000  1.079    0.000    0.000    1.010   1.000  0.000  0.000    1.010   4.000
#262.000  4.000  730.000  158.621  508.173   5.000  0.000  0.485   26.378  12.000
# 37.048  0.348   83.897   30.516   78.401   0.581  0.000  0.061    4.403   1.265
#      estlvs
#2.479382e+04
#4.200634e+02
#6.355970e+05
#4.945068e+04
#    mu1      w   ltau   minp  meanp   maxp    sdd     tb
#148.638  2.528  0.028  0.337  0.421  0.525  0.086  0.088
# 36.000  2.000  0.011  0.025  0.200  0.227  0.000  0.000
#205.000  5.000  0.173  0.500  0.500  0.880  0.380  0.187
# 20.725  0.696  0.020  0.151  0.096  0.093  0.082  0.039

# Absolute optimisation on lvs (MAX_TIME=3600):
# LVS/sudoku_6_newv$ nomad np
# running on server2 XXX


squares A B aux
rred A B aux
ls A B aux
rprod B aux A
box A B
