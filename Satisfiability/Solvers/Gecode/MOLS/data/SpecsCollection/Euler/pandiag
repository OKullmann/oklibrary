# Counts for N >= 2:
# 0, 0, 0, 2, 0, 12, 0, 0, 0
# 56

# See ../Pandiagonal for the basic data (k=1); so a necessary
# condition for satisfiability is that N is not divisible by 2 or 3.

# According to literature, N=13 is satisfiable.

# Question: it seems that orthogonality does not make much of a further
# restriction to pandiagonality?!?
# Answer: for N up to 10 the number of solutions is the same,
# but for N=11 it is different: 56 for pandiag and 12 for pandiagsudoku.


# gcMols:

# 2 <= N <= 9:

# MOLS> ./gcMols 2,9 data/SpecsCollection/Euler/pandiag "" count dom bin mindegdom "" 1 1 ""
#  N       rt  pl  bt        bv   bo gcd      satc           t           ppc        flvs        gnds     gd st
#  2    count dom bin mindegdom  asc   1         0       0.000             5           1           0      0  0
#  3    count dom bin mindegdom  asc   1         0       0.000            14           1           0      0  0
#  4    count dom bin mindegdom  asc   1         0       0.000            21           1           0      0  0
#  5    count dom bin mindegdom  asc   1         2       0.000           351           0           3      1  0
#  6    count dom bin mindegdom  asc   1         0       0.001          4689          63         125      6  0
#  7    count dom bin mindegdom  asc   1        12       0.288       1213006        8386       16795     18  0
#  8    count dom bin mindegdom  asc   1         0       0.241        759816        7065       14129      9  0
#  9    count dom bin mindegdom  asc   1         0       0.029         70606         873        1745      6  0

# MOLS> ./gcMols 2,9 data/SpecsCollection/Euler/pandiag "" count dom - mindom "" 1 1 ""
#  N       rt  pl  bt        bv   bo gcd      satc           t           ppc        flvs        gnds     gd st
#  2    count dom bin    mindom  asc   1         0       0.000             5           1           0      0  0
#  2    count dom enu    mindom  asc   1         0       0.000             5           1           0      0  0
#  3    count dom bin    mindom  asc   1         0       0.000            14           1           0      0  0
#  3    count dom enu    mindom  asc   1         0       0.000            14           1           0      0  0
#  4    count dom bin    mindom  asc   1         0       0.000            21           1           0      0  0
#  4    count dom enu    mindom  asc   1         0       0.000            21           1           0      0  0
#  5    count dom bin    mindom  asc   1         2       0.000           348           0           3      1  0
#  5    count dom enu    mindom  asc   1         2       0.000           348           0           3      1  0
#  6    count dom bin    mindom  asc   1         0       0.000           276           3           5      1  0
#  6    count dom enu    mindom  asc   1         0       0.000           270           3           4      1  0
#  7    count dom bin    mindom  asc   1        12       0.000          6750          24          71      4  0
#  7    count dom enu    mindom  asc   1        12       0.002          6690          24          61      4  0
#  8    count dom bin    mindom  asc   1         0       0.055        142515        1151        2301      8  0
#  8    count dom enu    mindom  asc   1         0       0.053        142188        1155        2181      8  0
#  9    count dom bin    mindom  asc   1         0       1.862       4613105       37330       74659     12  0
#  9    count dom enu    mindom  asc   1         0       1.883       4558314       37398       64491     12  0

# MOLS> ./gcMols 2,12 data/SpecsCollection/Euler/pandiag "" count dom bin maxdom "" 1 1 "t,5"
#  N       rt  pl  bt        bv   bo gcd      satc           t           ppc        flvs        gnds     gd st
#  2    count dom bin    maxdom  asc   1         0       0.000             5           1           0      0  0
#  3    count dom bin    maxdom  asc   1         0       0.000            14           1           0      0  0
#  4    count dom bin    maxdom  asc   1         0       0.000            21           1           0      0  0
#  5    count dom bin    maxdom  asc   1         2       0.000           351           0           3      1  0
#  6    count dom bin    maxdom  asc   1         0       0.001          5336          66         131      6  0
#  7    count dom bin    maxdom  asc   1        12       0.284       1201277        8265       16553     13  0
#  8    count dom bin    maxdom  asc   1         0       5.000      18019820      105685      211380     17  1
#  9    count dom bin    maxdom  asc   1         0       4.996      15087020       74588      149192     20  1
# 10    count dom bin    maxdom  asc   1         0       4.996      14991112       69641      139299     22  1
# 11    count dom bin    maxdom  asc   1         0       4.996      15255653       57299      114625     31  1
# 12    count dom bin    maxdom  asc   1         0       5.000      12784929       37674       75385     38  1


# N=10:

# MOLS> ./gcMols 10 data/SpecsCollection/Euler/pandiag "" count dom bin mindegdom "" 1 16 ""
#  N       rt  pl  bt        bv   bo gcd      satc           t           ppc        flvs        gnds     gd st
# 10    count dom bin mindegdom  asc   1         0    1707.715    2052506524    15900127    31800253     41  0

# MOLS> ./gcMols 10 data/SpecsCollection/Euler/pandiag "" count dom bin mindom "" 1 16 ""
#  N       rt  pl  bt        bv   bo gcd      satc           t           ppc        flvs        gnds     gd st
# 10    count dom bin    mindom  asc   1         0    1940.020    2074015882    12256472    24512943     33  0
# MOLS> ./gcMols 10 data/SpecsCollection/Euler/pandiag "" count dom enu mindom "" 1 16 ""
#  N       rt  pl  bt        bv   bo gcd      satc           t           ppc        flvs        gnds     gd st
# 10    count dom enu    mindom  asc   1         0    1905.727    2068970727    12298519    22307204     24  0


# N=11:

# MOLS> ./gcMols 11 data/SpecsCollection/Euler/pandiag "" +count dom bin mindegdom "" 1 16 ""
# aborted after one hour wallclock without finding a solution

# MOLS> ./gcMols 11 data/SpecsCollection/Euler/pandiag "" +count dom bin mindom "" 1 16 ""
# aborted after one hour wallclock without finding a solution
# MOLS> ./gcMols 11 data/SpecsCollection/Euler/pandiag "" +count dom enu mindom "" 1 16 ""
# aborted after one hour wallclock without finding a solution

# MOLS> ./gcMols 11 data/SpecsCollection/Euler/pandiag "" +count dom bin maxdom desc 1 16 ""
# aborted after one hour wallclock: found 7 solutions quickly.


# N=12:

# MOLS> ./gcMols 12 data/SpecsCollection/Euler/pandiag "" count dom bin mindegdom "" 1 16 ""
# aborted after one hour wallclock without finding a solution

# MOLS> ./gcMols 12 data/SpecsCollection/Euler/pandiag "" count dom bin mindom "" 1 16 ""
# aborted after one hour wallclock without finding a solution
# MOLS> ./gcMols 12 data/SpecsCollection/Euler/pandiag "" count dom enu mindom "" 1 16 ""
# aborted after one hour wallclock without finding a solution



# rlaMols:

# 2 <= N <= 10:

# ./rlaMols 2,10 data/SpecsCollection/Euler/pandiag "" count dom bin mindegdom "" "" 1 1 ""
# solves all problems quickly.
# enu seems even better.

# bin/enu + mindom somewhat slower for N=10.

# N = 11:

# ./rlaMols 11 data/SpecsCollection/Euler/pandiag "" +count dom enu mindegdom "" "" 1 12 ""
#  N       rt  pl  bt        bv   bo    lar gcd     satc           t        ppc st      nds    inds      lvs
# 11   +count dom enu mindegdom  asc  relpr   1       56     774.834     602582  0     3327     424     2903
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc      tr  pelvals     dp
#2304.974  1.119    7.161  109.173  182.897   2.104  0.000   5.820    1.213  3.335
#1266.000  0.000    0.000   64.064   58.294   1.000  0.000   0.531    0.000  0.000
#2530.000  3.500   86.721  114.961  408.440   4.000  0.000  14.341   17.598  6.000
# 300.355  0.365   20.225   12.187   43.149   0.393  0.000   2.365    3.584  0.956
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc      tr  pelvals     dp
#2190.531  2.094    0.143   13.468   41.316   1.241  0.019   1.304    1.654  4.450
#1027.000  1.081    0.000    0.426    1.023   1.000  0.000   0.005    0.255  3.000
#2427.000  7.000    1.714   87.143  247.373   3.000  1.000  10.942   11.998  7.000
# 453.143  1.010    0.261   14.963   50.030   0.459  0.138   1.806    1.507  0.855

# bin/enu + mindom much worse.

# N = 12:

# ./rlaMols 12 data/SpecsCollection/Euler/pandiag "" +count dom enu mindegdom "" "" 1 16 ""
# aborted:
#  N       rt  pl  bt        bv   bo    lar gcd     satc           t        ppc st      nds    inds      lvs
# 12   +count dom enu mindegdom  asc  relpr   1        0  326543.961   71592200  1   707734   79108   628626
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc      tr  pelvals      dp
#3062.535  0.927    0.810  112.428  191.387   2.105  0.000  19.430    0.180   8.002
#2635.000  0.000    0.000  111.458  110.915   1.000  0.000   4.913    0.000   0.000
#3456.000  2.000    3.209  114.210  459.625   5.000  0.000  51.565    0.631  16.000
#  57.278  0.309    0.325    0.174   41.999   0.585  0.000   4.559    0.099   1.245
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc      tr  pelvals      dp
#3015.702  2.029    0.153   17.933   58.463   1.412  0.000   5.848    0.864   9.127
#2570.000  1.037    0.000    0.000    0.167   1.000  0.000   0.000    0.134   7.000
#3135.000  9.000    2.036  110.523  453.084   5.000  0.000  52.998    5.844  17.000
#  53.866  1.012    0.264   23.810   78.636   0.692  0.000   8.134    0.626   1.143

# ./rlaMols 12 data/SpecsCollection/Euler/pandiag "" +count dom enu mindom "" "" 1 16 ""
# aborted:
#  N       rt  pl  bt        bv   bo    lar gcd     satc           t        ppc st      nds    inds      lvs
# 12   +count dom enu    mindom  asc  relpr   1        0  323298.199  104006719  1  1073154  245181   827973
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc      tr  pelvals      dp
#3064.655  1.106    1.998  112.396  177.150   2.000  0.000  18.138    0.172  10.307
#2998.000  0.000    0.000  111.458  111.458   1.000  0.000   5.174    0.000   0.000
#3456.000  1.800    3.161  112.742  183.879   2.000  0.000  23.326    0.711  11.000
#  40.315  0.202    0.317    0.190    1.022   0.002  0.000   1.263    0.112   0.940
#     mu0  qfppc  pprunes  pmprune  pprobes  rounds   solc     tr  pelvals      dp
#3001.938  1.848    0.029    3.682   10.996   1.000  0.000  0.865    0.530  11.965
#2967.000  1.312    0.000    2.081    2.668   1.000  0.000  0.129    0.199  11.000
#3027.000  9.000    0.585    9.468   18.552   1.000  0.000  2.075    0.966  12.000
#   8.300  0.681    0.096    1.004    3.006   0.000  0.000  0.244    0.098   0.183


# laMols with wdL:

# N=11:

# Optimising TAUscan via Nomad (MAX_TIME 10000s, rep=1000):
# TAU_pandiag_11_wdL_ave> nomad np
# 55        19747.581053   1.1        3.1        0.1        0.1        0.1        1.1        0.1        0.1        0.1
# Blackbox evaluations: 64 Total model evaluations: 4057 Cache hits: 1 Total number of evaluations: 65
# Reproduction:
# XXX running on server

# Alternative optimisation on ave+sd (MAX_TIME 10000s, rep=1000):
# TAU_pandiag_11_wdL_avepsd> nomad np
# 35        73318.600998   0.1        0.1        0.0001     0.1        1.1        1.1        0.1        0.1        0.1
# Blackbox evaluations: 71 Total model evaluations: 2024
# Reproduction:
# XXX running on server

# Alternative optimisation on max (MAX_TIME 10000s, rep=1000):
# TAU_pandiag_11_wdL_max> nomad np
# 38       1679594.839473   0.1        0.1        0.1        0.1        0.1        1.1        1.1        0.1        0.1
# Blackbox evaluations: 69 Total model evaluations: 2038 Cache hits: 2 Total number of evaluations: 71
# Reproduction:
# XXX running on server

# Alternative optimisation on sd (MAX_TIME 10000s, rep=1000):
# TAU_pandiag_11_wdL_sd> nomad np
# 35        63752.045576   0.1        0.1        0.0001     0.1        1.1        1.1        0.1        0.1        0.1
# Blackbox evaluations: 71 Total model evaluations: 2024
# Reproduction:
# XXX running on server

# laMols with newvars:

# N=11:

# Optimising TAUscan via Nomad (MAX_TIME 10000s, rep=1000):
# TAU_pandiag_11_newv_ave> nomad np
# 47          5762.584419   1         10        -10         10         -6          9          7        -10          9        -10
# Blackbox evaluations: 87 Total model evaluations: 6099 Cache hits: 2 Total number of evaluations: 89
# Reproduction:
# XXX running on server

# Alternative optimisation on ave+sd (MAX_TIME 10000s, rep=1000):
# TAU_pandiag_11_newv_avepsd> nomad np
# 80         28413.404008  -1         10        -10          8        -10          9         10        -10         10        -10
# Blackbox evaluations: 84 Total model evaluations: 8130 Cache hits: 2 Total number of evaluations: 86
# Reproduction:
# XXX running on server

# Alternative optimisation on max (MAX_TIME 10000s, rep=1000):
# TAU_pandiag_11_newv_max> nomad np
# 50         473200.971508   1          5          0          6         -3          9        -10         -8         -5         10
# Blackbox evaluations: 82 Total model evaluations: 6098 Cache hits: 1 Total number of evaluations: 83
# Reproduction:
# XXX running on server

# Alternative optimisation on sd (MAX_TIME 10000s, rep=1000):
# TAU_pandiag_11_newv_sd> nomad np
# 66         25777.005562   0          6         -5         10         -5         10          2         -4          3         -9
# Blackbox evaluations: 73 Total model evaluations: 4096 Cache hits: 1 Total number of evaluations: 74
# Reproduction:
# XXX running on server

squares A B aux
rred A B aux
ls A B aux
rprod A aux B
moddiag A B
modantidiag A B
