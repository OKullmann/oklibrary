# Counts for N >= 2:
# 0, 72, 6912, 6220800

# These counts are obtained from the reduced counts in ./red by
# multiplication with: (N!)^2 * (N-1)! .
# This factor is 62'208'000 for N=6, and 18'289'152'000 for N=7.
# So the count for N=7 is 18289152000 * 342480 = 6'263'668'776'960'000.

# Roughly the number of leaves for N=6 with red and wdL/newv is 3000,
# so 62000000 * 3000 = 1.86e11 leaves expected here:
# The predictions below are somewhat better, but that could
# be wrong.


# gcMols:

# MOLS> ./gcMols 2,5 data/SpecsCollection/Euler_unred "" count "" enu mindom "" 1 1
#   N       rt  pl  bt        bv   bo  gcd        satc           t           ppc        flvs        gnds     gd
#   2    count dom enu    mindom  asc    1           0       0.000            84           4           7      2
#   3    count dom enu    mindom  asc    1          72       0.000          3568           0         130      5
#   4    count dom enu    mindom  asc    1        6912       0.140       2011982       20736       51809     11
#   5    count dom enu    mindom  asc    1     6220800     772.834    7916075800    72576000   132911726     19

# N=6:

# MOLS> time ./gcMols 6 data/SpecsCollection/Euler_unred "" count "" enu mindom "" 1 16
# aborted after 143 hours wallclock-time.



# laMols with wdL:

# Optimising TAUscan via Nomad (MAX_TIME 600s, rep=100):
# TAU_basis_6_wdL_ave> nomad np
# 106 32753368653.826656   0.0301     0.62       0.0401     0.0001
# Blackbox evaluations: 143 Cache hits: 9 Total number of evaluations: 152
# Reproduction:
# TAU_basis_6_wdL_ave> time ./TAUscan 6 ../basis "" wdL hash "0.0301,0.62,0.0401,0.0001" 100 1 all
# 100 : 8.79760892466805235308e+08 3.27533686538266556747e+10 5.91737435608699649572e+11; 7.68166365636545908526e+10
# real    0m38.969s user    0m38.636s sys     0m0.322s

# Alternative optimisation on ave+sd:
# TAU_basis_6_wdL_avepsd> nomad np
# 54 75706521078.575272   0.0001     0.12       0.09       0.08
# Blackbox evaluations: 140 Cache hits: 30 Total number of evaluations: 170
# Reproduction:
# TAU_basis_6_wdL_avepsd> time ./TAUscan 6 ../basis "" wdL hash "0.0001,0.12,0.09,0.08" 100 1 all
# 100 : 2.41105811492673242884e+09 3.69699061624764448777e+10 2.21234532573812525958e+11; 3.87366149160988284200e+10
# real    0m39.103s user    0m38.795s sys     0m0.294s

# Alternative optimisation on max:
# TAU_basis_6_wdL_max> nomad np
# 54 221234532573.812531   0.0001     0.12       0.09       0.08
# Blackbox evaluations: 140 Cache hits: 30 Total number of evaluations: 170
# Reproduction:
# same weights as for TAU_basis_6_wdL_avepsd.

# Alternative optimisation on sd:
# TAU_basis_6_wdL_sd> nomad np
# 54 38736614916.098831   0.0001     0.12       0.09       0.08
# Blackbox evaluations: 140 Cache hits: 30 Total number of evaluations: 170
# Reproduction:
# TAU_basis_6_wdL_sd>
# same weights as for TAU_basis_6_wdL_avepsd.

# New approach (version >= 0.99):
# XXX NO XXX

# Optimising TAUscan via Nomad (MAX_TIME 600s, rep=100):
# TAU/basis_6_wdL_ave> nomad np
# 64 35804108716.560135   0.0001     0.42       0.0001     0.0001
# Blackbox evaluations: 133 Cache hits: 15 Total number of evaluations: 148
# Reproduction (exact):
# TAU/basis_6_wdL_ave> time ./TAUscan 6 ../../basis "" enu wdL hash "0.0001,0.42,0.0001,0.0001" 100 1 all
# 100 : 8.03692906735255177264e+07 3.58041087165601384006e+10 4.12393496586368163407e+11; 6.04890799976347304657e+10
# real    0m42.910s user    0m42.496s sys     0m0.401s
# Seems similar to the old values.

# Alternative optimisation on ave+sd:
# TAU/basis_6_wdL_avepsd> nomad np
# 67  93521293281.968674   0.0001     0.06       0.08       0.12
# Blackbox evaluations: 136 Cache hits: 24 Total number of evaluations: 160
# Reproduction (not exact):
# TAU/basis_6_wdL_avepsd> time ./TAUscan 6 ../../basis "" enu wdL hash "0.0001,0.06,0.08,0.12" 100 1 all
# 100 : 2.83937549812355943536e+09 4.24346187360756406635e+10 2.90802946286743894249e+11; 5.10866745458930295780e+10
# real	0m34.798s user	0m34.482s sys	0m0.301s
# Nomad result is higher (worse) than the old result. TAU scan reproduction
# gave higher (worse) result with higher (worse) standard deviation.


# laMols with newvars:

# N=6:

# Optimising TAUscan via Nomad (MAX_TIME 600s, rep=100):
# TAU_basis_6_newv_ave> nomad np
# 57  10916304993.495291  -1          4        -10         -7        -10
# Blackbox evaluations: 110 Cache hits: 10 Total number of evaluations: 120
# Reproduction:
# TAU_basis_6_newv_ave> time ./TAUscan 6 ../basis "" newv hash "-1,4,10,-7,-10" 100 1 all
# 100 : 1.57881689350773441908e+09 1.02185097071459187709e+11 7.80897975453139375687e+11; 1.56733541159994666442e+11
# real    0m42.945s user    0m42.608s sys     0m0.322s
# time ./laMols 6 ../basis "" +count dom enu newv "" "" 1 16 "-1,4,10,-7,-10" "" ""
# aborted after 8 minutes wallclock-time.

# Alternative optimisation on ave+sd:
# TAU_basis_6_newv_avepsd> nomad np
# 52  20296913711.558559  -1          0         -9        -10         -6
# Blackbox evaluations: 103 Cache hits: 9 Total number of evaluations: 112
# Reproduction:
# TAU_basis_6_newv_avepsd> time ./TAUscan 6 ../basis "" newv hash "-1,0,-9,-10,-6" 100 1 all
# 100 : 4.81079455107429972762e+08 7.33715513279553592438e+09 9.58153588241425036341e+10; 1.29597585787630234035e+10
# real    0m43.047s user    0m42.713s sys     0m0.320s

# Alternative optimisation on max:
# TAU_basis_6_newv_max> nomad np
# 104  225547432826.752136  -0.41      -3         -6         -8         -2
# Blackbox evaluations: 106 Cache hits: 6 Total number of evaluations: 112
# Reproduction:
# TAU_basis_6_newv_max> time ./TAUscan 6 ../basis "" newv hash "-0.41,-3,-6,-8,-2" 100 1 all
# 100 : 7.97752951121982294280e+07 3.73470608356885504425e+10 2.25547432826752139717e+11; 4.50453864822287522741e+10
# real    0m43.469s user    0m43.220s sys     0m0.234s

# Alternative optimisation on sd:
# TAU_basis_6_newv_sd> nomad np
# 59  12959758578.763023  -1          0         -9        -10         -6
# Blackbox evaluations: 106 Cache hits: 14 Total number of evaluations: 120
# Reproduction:
# TAU_basis_6_newv_sd> time ./TAUscan 6 ../basis "" newv hash "-1,0,-9,-10,-6" 100 1 all
# 100 : 4.81079455107429972762e+08 7.33715513279553592438e+09 9.58153588241425036341e+10; 1.29597585787630234035e+10
# real    0m43.070s user    0m42.711s sys     0m0.344s

# New approach (version >= 0.99, higher rep and time):
# Optimising TAUscan via Nomad (MAX_TIME 20000s, 6 threads, rep=1000):
# TAU/basis_6_newv_ave> nomad np
# 1  138900441749.480316   0          0          0          0          0
# 20  21201934110.599575  -1         -1        -10        -10          7
#208  21073064652.675365  -1         -0.9867    -9.99      -9.9938     7.0077
# A termination criterion is reached: No termination (all). Mesh minimum precision reached (Algo)
# Blackbox evaluations:        931 Cache hits:                  361 Total number of evaluations: 1292
# This is a case where no model-evaluations were performed.
# TAU_basis_6_newv_ave> time ./TAUscan 6 ../../basis "" enu newv hash "-1,-1,-10,-10,7" 1000 10 all
# 1000 : 1.35528450090974572767e+09 2.12019341105995766278e+10 6.66338448839291947305e+11; 4.47476241906456983723e+10
# real    0m44.836s user    7m8.576s sys     0m3.037s
# Rerunning with "DISPLAY_DEGREE 4":
# TAU/basis_6_newv_ave> time nomad np | tee OUTPUT
# due to a bug with nomad-logging, for now not further pursued.



squares A B aux
ls A B aux
rprod B aux A
