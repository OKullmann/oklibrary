#!/usr/bin/env bash
# Oliver Kullmann, 13.4.2020 (Swansea)
# Copyright 2020 Oliver Kullmann
# This file is part of the OKlibrary. OKlibrary is free software; you can redistribute
# it and/or modify it under the terms of the GNU General Public License as published by
# the Free Software Foundation and included in this library; either version 3 of the
# License, or any later version. */

# USAGE:

# AAnalysis file

# Header:
# a0s_res a0s_t a0r_res a0r_st a0r_ut a0rc a0auts a1s_res a1s_t a1r_res a1r_st a1r_ut a1rc a1auts
# s:sat, r:reduction, u:unsat


# Main variables for customisation, and their default-values:
# - satwrapper = SATWrap_minisat
# - directory = ${program}_${filename}_${satwrappername}_${timestamp}

# TODOS:


# #########################

set -o errexit
set -o nounset

program="AAnalysis"
version="0.1.3"

originput="$1"
filename="$(basename ${originput})"

: ${tool_A0S:="A0Satisfiability"}
: ${tool_A0R:="A0Reduction"}
: ${tool_A1S:="A1Satisfiability"}
: ${tool_A1R:="A1Reduction"}

: ${satwrapper:="SATWrap_minisat"}
satwrappername="$(basename ${satwrapper})"

timestamp="$(date +%s%N)"

: ${directory:="${program}_${filename}_${satwrappername}_${timestamp}"}
mkdir ${directory}


A0Sres=$(input=${originput} satwrapper=${satwrapper} directory="${directory}/A0S" A0Satisfiability)

A0Rres=$(input=${originput} satwrapper=${satwrapper} directory="${directory}/A0R" A0Reduction)

A1Sres=$(input=${originput} satwrapper=${satwrapper} directory="${directory}/A1S" A1Satisfiability)

A1Rres=$(input=${originput} satwrapper=${satwrapper} directory="${directory}/A1R" A1Reduction)


resultfile="${directory}/result"

echo "a0s_res a0s_t  a0r_res a0rc a0auts a0r_st a0r_ut  a1s_res a1s_t  a1r_res a1rc a1auts a1r_st a1r_ut" > ${resultfile}
echo "${A0Sres} ${A0Rres} ${A1Sres} ${A1Rres}" >> ${resultfile}


exit 1
