csltok2:

------------------------------------------------------------------------------------------------
First with the dynamic version
(base_t = std::uint16_t seems fastest):

Random> ./WrongRandomPermutation 3
  3 27 81
0  1  2
9 10  8
9  8 10
9  9  9
Random> ./WrongRandomPermutation 4
  4 256 1024
 0  1  2  3
64 75 63 54
64 57 72 63
64 60 57 75
64 64 64 64
Random> ./WrongRandomPermutation 5
  5 3125 15625
  0   1   2   3   4
625 756 656 576 512
625 564 720 640 576
625 580 544 720 656
625 600 580 564 756
625 625 625 625 625
Random> ./WrongRandomPermutation 6
  6 46656 279936
   0    1    2    3    4    5
7776 9605 8525 7625 6875 6250
7776 7105 9150 8250 7500 6875
7776 7230 6775 9000 8250 7625
7776 7380 7050 6775 9150 8525
7776 7560 7380 7230 7105 9605
7776 7776 7776 7776 7776 7776
Random> ./WrongRandomPermutation 7
  7 823543 5.7648e+06
     0      1      2      3      4      5      6
117649 147498 133092 120744 110160 101088  93312
117649 108618 140868 128520 117936 108864 101088
117649 109914 103284 137592 127008 117936 110160
117649 111426 106092 101520 137592 128520 120744
117649 113190 109368 106092 103284 140868 133092
117649 115248 113190 111426 109914 108618 147498
117649 117649 117649 117649 117649 117649 117649
Random> ./WrongRandomPermutation 8
  8 1.67772e+07 1.34218e+08
      0       1       2       3       4       5       6       7
2097152 2658551 2429175 2228471 2052855 1899191 1764735 1647086
2097152 1952657 2546824 2346120 2170504 2016840 1882384 1764735
2097152 1969464 1857737 2480576 2304960 2151296 2016840 1899191
2097152 1988672 1893752 1810697 2458624 2304960 2170504 2052855
2097152 2010624 1934912 1868664 1810697 2480576 2346120 2228471
2097152 2035712 1981952 1934912 1893752 1857737 2546824 2429175
2097152 2064384 2035712 2010624 1988672 1969464 1952657 2658551
2097152 2097152 2097152 2097152 2097152 2097152 2097152 2097152


Random> time ./WrongRandomPermutation 9
  9 3.8742e+08 3.48678e+09
       0        1        2        3        4        5        6        7        8
43046721 55040968 50789440 47010304 43651072 40665088 38010880 35651584 33554432
43046721 40360904 52886592 49107456 45748224 42762240 40108032 37748736 35651584
43046721 40623048 38468672 51466752 48107520 45121536 42467328 40108032 38010880
43046721 40917960 39025728 37343744 50761728 47775744 45121536 42762240 40665088
43046721 41249736 39652416 38232576 36970496 50761728 48107520 45748224 43651072
43046721 41622984 40357440 39232512 38232576 37343744 51466752 49107456 47010304
43046721 42042888 41150592 40357440 39652416 39025728 38468672 52886592 50789440
43046721 42515280 42042888 41622984 41249736 40917960 40623048 40360904 55040968
43046721 43046721 43046721 43046721 43046721 43046721 43046721 43046721 43046721

real	0m8.353s
user	0m8.353s
sys	0m0.000s


Random> time ./WrongRandomPermutation 10
  10 1e+10 1e+11
         0          1          2          3          4          5          6          7          8          9
1000000000 1287420489 1197420489 1116420489 1043520489  977910489  918861489  865717389  817887699  774840978
1000000000  943046721 1240467210 1159467210 1086567210 1020957210  961908210  908764110  860934420  817887699
1000000000  947829690  900876411 1207296900 1134396900 1068786900 1009737900  956593800  908764110  865717389
1000000000  953144100  910973790  873020511 1187541000 1121931000 1062882000 1009737900  961908210  918861489
1000000000  959049000  922193100  889022790  859169511 1180980000 1121931000 1068786900 1020957210  977910489
1000000000  965610000  934659000  906803100  881732790  859169511 1187541000 1134396900 1086567210 1043520489
1000000000  972900000  948510000  926559000  906803100  889022790  873020511 1207296900 1159467210 1116420489
1000000000  981000000  963900000  948510000  934659000  922193100  910973790  900876411 1240467210 1197420489
1000000000  990000000  981000000  972900000  965610000  959049000  953144100  947829690  943046721 1287420489
1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000 1000000000

real	3m26.384s
user	3m26.382s
sys	0m0.000s


Random> time ./WrongRandomPermutation 11
  11 2.85312e+11 3.13843e+12
          0           1           2           3           4           5           6           7           8           9          10
25937424601 33579476910 31435888100 29487171000 27715610000 26105100000 24641000000 23310000000 22100000000 21000000000 20000000000
25937424601 24579476910 32435888100 30487171000 28715610000 27105100000 25641000000 24310000000 23100000000 22000000000 21000000000
25937424601 24679476910 23535888100 31587171000 29815610000 28205100000 26741000000 25410000000 24200000000 23100000000 22100000000
25937424601 24789476910 23745888100 22797171000 31025610000 29415100000 27951000000 26620000000 25410000000 24310000000 23310000000
25937424601 24910476910 23976888100 23128171000 22356610000 30746100000 29282000000 27951000000 26741000000 25641000000 24641000000
25937424601 25043576910 24230988100 23492271000 22820710000 22210200000 30746100000 29415100000 28205100000 27105100000 26105100000
25937424601 25189986910 24510498100 23892781000 23331220000 22820710000 22356610000 31025610000 29815610000 28715610000 27715610000
25937424601 25351037910 24817959100 24333342000 23892781000 23492271000 23128171000 22797171000 31587171000 30487171000 29487171000
25937424601 25528194010 25156166200 24817959100 24510498100 24230988100 23976888100 23745888100 23535888100 32435888100 31435888100
25937424601 25723065720 25528194010 25351037910 25189986910 25043576910 24910476910 24789476910 24679476910 24579476910 33579476910
25937424601 25937424601 25937424601 25937424601 25937424601 25937424601 25937424601 25937424601 25937424601 25937424601 25937424601

real	107m28.012s
user	107m27.543s
sys	0m0.152s


The fixed version is considerably faster
(base_t = std::uint_fast16_t seems fastest):

Random> time ./WrongRandomPermutationFixed
  9 3.8742e+08 3.48678e+09
real	0m2.215s
user	0m2.212s
sys	0m0.000s

Random> time ./WrongRandomPermutationFixed
  10 1e+10 1e+11
real	1m4.654s
user	1m4.653s
sys	0m0.000s

Random> time ./WrongRandomPermutation 11
  11 2.85312e+11 3.13843e+12
real	30m44.410s
user	30m44.385s
sys	0m0.000s

